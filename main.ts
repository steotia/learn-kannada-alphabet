namespace SpriteKind {
    export const UI = SpriteKind.create()
}
function IntroduceGame () {
    game.splash("Learn by playing!")
    game.showLongText("Welcome to the Kannada rapid fire game.", DialogLayout.Bottom)
    game.showLongText("A Kannada letter will come on top and you have to give the correct answer by clicking A or B.", DialogLayout.Bottom)
    game.showLongText("If your answer is correct you will get 1 point and if it is incorrect you will lose a life.", DialogLayout.Bottom)
    game.showLongText("You have 60 seconds to achieve a high score. ALL THE BEST!", DialogLayout.Bottom)
    while (!(controller.A.isPressed())) {
        game.splash("Press A to start!")
    }
    initGame()
    askQuestion()
}
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (question_asked) {
        check_answer(1)
    }
    askQuestion()
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (game_started) {
        if (question_asked) {
            check_answer(0)
        }
        askQuestion()
    }
})
info.onCountdownEnd(function () {
    game.over(true)
})
function initGame () {
    tiles.setTilemap(tilemap`level2`)
    info.setScore(0)
    info.setLife(3)
    initImages()
    info.startCountdown(60)
    game_started = true
}
info.onLifeZero(function () {
    game.over(false)
})
function check_answer (button: number) {
    if (button == answer_position) {
        info.changeScoreBy(1)
    } else {
        info.changeLifeBy(-1)
    }
    question_asked = false
    mySprite2.destroy()
    answer.destroy()
    wrong_answer.destroy()
    music.thump.play()
    scene.cameraShake(4, 100)
}
function initImages () {
    questions = [assets.image`a`, img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ...................11...........
        ......11111.......111...........
        .....1....1.......1.1...........
        .....1..111.......111...........
        .....1...11......111............
        .....1.........111.11...........
        .....11......111....1...........
        ......1.............1...........
        ......11...........1............
        .......11..........1............
        ........111.......11............
        ..........11.....11.............
        ...........111111...............
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `, img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................11111...........
        ......11111...111...111.........
        .....11...11.11.......1.........
        ....11.....11.........11........
        ....1.......1..........1........
        ....1.......1.........11........
        ....1.................1.........
        ....1.................1.........
        ....11...........11..1..........
        .....1..........111111..........
        ......11........1..11...........
        .......1........11111...........
        ....................11..........
        .....................11.........
        ......................11........
        .......................11.......
        ........................1.......
        .........................11.....
        ..........................1.....
        ................................
        ................................
        ................................
        ................................
        `, img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ...................1............
        ..........1111111111............
        .............111111...111.......
        ...........111....11..1.1.......
        ...........1.......1..1.1.......
        ..........1........1..1.1.......
        .....11111111111111111111.......
        .........1.........1..1.........
        .........1.........1..1.........
        .........11.......11..1.........
        ..........11.....11...1.........
        ...........1111111....11........
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `]
    answers = [img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . f f f f . . . . . . 
        . . . . . f f . . f . . . . . . 
        . . . . . f . . . f . . . . . . 
        . . . . . f . . . f . . . . . . 
        . . . . . f . . f f . . f . . . 
        . . . . . . f f f . f f f . . . 
        . . . . . . f f . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ......fff...........fff.........
        .....ff.f..........ff.f.........
        .....f..f.........ff..f.........
        ....ff..f........ff...f.........
        ....f...ff.......f....f.........
        ....f...ff.......f....f.........
        ....f..fff.......f...ff.........
        ....f..f.f.......f...fff........
        ....f.ff.ff......fffff.ff.......
        ....fff.........................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `, img`
        ................................
        ................................
        ................................
        ................................
        ...........fffff................
        ..........ff...ff...............
        .........ff.....f...............
        .........f......f...............
        ........ff......f...............
        ........f.......f...............
        ........fff....ff...............
        .........fffffff................
        .........f......................
        .........ff.....................
        ..........f.....................
        ..........f.....................
        ..........ff....................
        ...........fff..................
        .............fffff..............
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `, img`
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ............ff..................
        ..........fffff....ffff.........
        ..........f...f...ff..f.........
        ..........f..ff...ff.ff.........
        .........fffff....ffff..........
        .........ff.......f.............
        ..........f.......f.............
        ..........f.......ff............
        ..........ff.......f............
        ...........ff..f...ff...........
        ............ffff....fffff.......
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        ................................
        `]
}
function askQuestion () {
    answer_position = randint(0, 1)
    random_number = randint(0, 3)
    other_random_number = randint(0, 3)
    while (random_number == other_random_number) {
        random_number = randint(0, 3)
    }
    mySprite2 = sprites.create(questions[random_number], SpriteKind.UI)
    mySprite2.setPosition(80, 30)
    answer = sprites.create(answers[random_number], SpriteKind.UI)
    wrong_answer = sprites.create(answers[other_random_number], SpriteKind.UI)
    if (answer_position == 0) {
        answer.setPosition(37, 95)
        wrong_answer.setPosition(120, 95)
    } else {
        wrong_answer.setPosition(37, 95)
        answer.setPosition(120, 95)
    }
    question_asked = true
}
let other_random_number = 0
let random_number = 0
let answers: Image[] = []
let questions: Image[] = []
let wrong_answer: Sprite = null
let answer: Sprite = null
let mySprite2: Sprite = null
let answer_position = 0
let game_started = false
let question_asked = false
IntroduceGame()
